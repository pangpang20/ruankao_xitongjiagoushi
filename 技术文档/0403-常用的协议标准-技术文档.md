# Common Protocol Standards - Technical Documentation
# 常用的协议标准 - 技术文档

---

## 1. Protocol Fundamentals / 协议基础

### 1.1 OSI and TCP/IP Models / OSI和TCP/IP模型

**English:**

**OSI (Open Systems Interconnection) 7-Layer Model:**

| Layer | Name         | Function                             | Protocols/Technologies | PDU              |
| ----- | ------------ | ------------------------------------ | ---------------------- | ---------------- |
| **7** | Application  | User interface, application services | HTTP, FTP, SMTP, DNS   | Data/Message     |
| **6** | Presentation | Data formatting, encryption          | SSL/TLS, JPEG          | Data             |
| **5** | Session      | Session management                   | NetBIOS, RPC           | Data             |
| **4** | Transport    | End-to-end communication             | TCP, UDP               | Segment/Datagram |
| **3** | Network      | Routing, logical addressing          | IP, ICMP, OSPF         | Packet           |
| **2** | Data Link    | Physical addressing                  | Ethernet, Wi-Fi        | Frame            |
| **1** | Physical     | Physical transmission                | Cables, hubs           | Bit              |

**TCP/IP 4-Layer Model:**

| Layer              | OSI Equivalent | Function                 | Key Protocols        |
| ------------------ | -------------- | ------------------------ | -------------------- |
| **Application**    | 5-7            | Application services     | HTTP, FTP, SMTP, DNS |
| **Transport**      | 4              | End-to-end communication | TCP, UDP             |
| **Internet**       | 3              | Routing, addressing      | IP, ICMP, ARP        |
| **Network Access** | 1-2            | Physical network access  | Ethernet, Wi-Fi      |

**中文：**

**OSI（开放系统互连）7层模型：**

| 层    | 名称       | 功能               | 协议/技术            | PDU       |
| ----- | ---------- | ------------------ | -------------------- | --------- |
| **7** | 应用层     | 用户界面、应用服务 | HTTP、FTP、SMTP、DNS | 数据/消息 |
| **6** | 表示层     | 数据格式化、加密   | SSL/TLS、JPEG        | 数据      |
| **5** | 会话层     | 会话管理           | NetBIOS、RPC         | 数据      |
| **4** | 传输层     | 端到端通信         | TCP、UDP             | 段/数据报 |
| **3** | 网络层     | 路由、逻辑寻址     | IP、ICMP、OSPF       | 数据包    |
| **2** | 数据链路层 | 物理寻址           | 以太网、Wi-Fi        | 帧        |
| **1** | 物理层     | 物理传输           | 电缆、集线器         | 比特      |

**TCP/IP 4层模型：**

| 层             | OSI等效 | 功能         | 关键协议             |
| -------------- | ------- | ------------ | -------------------- |
| **应用层**     | 5-7     | 应用服务     | HTTP、FTP、SMTP、DNS |
| **传输层**     | 4       | 端到端通信   | TCP、UDP             |
| **互联网层**   | 3       | 路由、寻址   | IP、ICMP、ARP        |
| **网络接入层** | 1-2     | 物理网络访问 | 以太网、Wi-Fi        |

---

## 2. Internet Core Protocols / 互联网核心协议

### 2.1 TCP (Transmission Control Protocol) / TCP（传输控制协议）

**English:**

**Three-Way Handshake:**

```
Client                Server
  |                     |
  |  SYN (seq=x)        |
  |-------------------->|
  |  SYN-ACK (ack=x+1)  |
  |<--------------------|
  |  ACK (ack=y+1)      |
  |-------------------->|
  |  Connected          |
```

**TCP vs UDP:**

| Feature         | TCP                 | UDP                    |
| --------------- | ------------------- | ---------------------- |
| **Connection**  | Connection-oriented | Connectionless         |
| **Reliability** | Reliable            | Unreliable             |
| **Ordering**    | Ordered             | No ordering            |
| **Speed**       | Slower              | Faster                 |
| **Use Cases**   | HTTP, FTP, email    | DNS, streaming, gaming |

**中文：**

**三次握手：**

```
客户端                服务器
  |                     |
  |  SYN (seq=x)        |
  |-------------------->|
  |  SYN-ACK (ack=x+1)  |
  |<--------------------|
  |  ACK (ack=y+1)      |
  |-------------------->|
  |  已连接             |
```

**TCP vs UDP：**

| 特性       | TCP                 | UDP               |
| ---------- | ------------------- | ----------------- |
| **连接**   | 面向连接            | 无连接            |
| **可靠性** | 可靠                | 不可靠            |
| **顺序**   | 有序                | 无顺序            |
| **速度**   | 较慢                | 较快              |
| **用例**   | HTTP、FTP、电子邮件 | DNS、流媒体、游戏 |

---

## 3. Application Layer Protocols / 应用层协议

### 3.1 HTTP/HTTPS / HTTP/HTTPS

**English:**

**HTTP Methods:**

| Method     | Description       | Idempotent |
| ---------- | ----------------- | ---------- |
| **GET**    | Retrieve resource | Yes        |
| **POST**   | Create resource   | No         |
| **PUT**    | Update resource   | Yes        |
| **DELETE** | Remove resource   | Yes        |

**HTTP Status Codes:**

| Code    | Category     | Example                        |
| ------- | ------------ | ------------------------------ |
| **2xx** | Success      | 200 OK, 201 Created            |
| **3xx** | Redirection  | 301 Moved, 302 Found           |
| **4xx** | Client Error | 400 Bad Request, 404 Not Found |
| **5xx** | Server Error | 500 Internal Error             |

**中文：**

**HTTP方法：**

| 方法       | 描述     | 幂等 |
| ---------- | -------- | ---- |
| **GET**    | 检索资源 | 是   |
| **POST**   | 创建资源 | 否   |
| **PUT**    | 更新资源 | 是   |
| **DELETE** | 删除资源 | 是   |

**HTTP状态码：**

| 代码    | 类别       | 示例                     |
| ------- | ---------- | ------------------------ |
| **2xx** | 成功       | 200 OK，201 已创建       |
| **3xx** | 重定向     | 301 已移动，302 已找到   |
| **4xx** | 客户端错误 | 400 错误请求，404 未找到 |
| **5xx** | 服务器错误 | 500 内部错误             |

### 3.2 DNS (Domain Name System) / DNS（域名系统）

**English:**

**DNS Record Types:**

| Type      | Description    | Example                        |
| --------- | -------------- | ------------------------------ |
| **A**     | IPv4 address   | example.com → 93.184.216.34    |
| **AAAA**  | IPv6 address   | example.com → 2606:2800:...    |
| **CNAME** | Canonical name | www → example.com              |
| **MX**    | Mail exchange  | mail.example.com (priority 10) |
| **TXT**   | Text record    | SPF, DKIM verification         |

**中文：**

**DNS记录类型：**

| 类型      | 描述     | 示例                         |
| --------- | -------- | ---------------------------- |
| **A**     | IPv4地址 | example.com → 93.184.216.34  |
| **AAAA**  | IPv6地址 | example.com → 2606:2800:...  |
| **CNAME** | 规范名称 | www → example.com            |
| **MX**    | 邮件交换 | mail.example.com（优先级10） |
| **TXT**   | 文本记录 | SPF、DKIM验证                |

---

## 4. Industrial Protocols / 工业协议

### 4.1 Modbus / Modbus

**English:**

**Function Codes:**

| Code   | Function                 | Description              |
| ------ | ------------------------ | ------------------------ |
| **01** | Read Coils               | Read output status       |
| **03** | Read Holding Registers   | Read output registers    |
| **05** | Write Single Coil        | Write single output      |
| **06** | Write Single Register    | Write single register    |
| **16** | Write Multiple Registers | Write multiple registers |

**Python Example:**
```python
from pymodbus.client import ModbusTcpClient

client = ModbusTcpClient('192.168.1.100')
client.connect()
result = client.read_holding_registers(0, 10, slave=1)
print(result.registers)
client.close()
```

**中文：**

**功能码：**

| 代码   | 功能         | 描述           |
| ------ | ------------ | -------------- |
| **01** | 读线圈       | 读取输出状态   |
| **03** | 读保持寄存器 | 读取输出寄存器 |
| **05** | 写单个线圈   | 写单个输出     |
| **06** | 写单个寄存器 | 写单个寄存器   |
| **16** | 写多个寄存器 | 写多个寄存器   |

**Python示例：**
```python
from pymodbus.client import ModbusTcpClient

client = ModbusTcpClient('192.168.1.100')
client.connect()
result = client.read_holding_registers(0, 10, slave=1)
print(result.registers)
client.close()
```

### 4.2 OPC UA / OPC UA

**English:**

**Key Features:**
- Platform independence
- Built-in security
- Information modeling
- Scalability
- Interoperability

**Python Example:**
```python
from opcua import Client

client = Client("opc.tcp://192.168.1.100:4840")
client.connect()
node = client.get_node("ns=2;i=1001")
value = node.get_value()
print(f"Value: {value}")
client.disconnect()
```

**中文：**

**关键特性：**
- 平台独立性
- 内置安全性
- 信息建模
- 可扩展性
- 互操作性

**Python示例：**
```python
from opcua import Client

client = Client("opc.tcp://192.168.1.100:4840")
client.connect()
node = client.get_node("ns=2;i=1001")
value = node.get_value()
print(f"值：{value}")
client.disconnect()
```

---

## 5. IoT Protocols / 物联网协议

### 5.1 MQTT / MQTT

**English:**

**QoS Levels:**

| Level | Name          | Description           |
| ----- | ------------- | --------------------- |
| **0** | At most once  | No acknowledgment     |
| **1** | At least once | Acknowledged delivery |
| **2** | Exactly once  | Guaranteed delivery   |

**Python Example:**
```python
import paho.mqtt.client as mqtt

def on_message(client, userdata, msg):
    print(f"{msg.topic}: {msg.payload.decode()}")

client = mqtt.Client()
client.on_message = on_message
client.connect("broker.hivemq.com", 1883)
client.subscribe("sensor/temperature")
client.publish("sensor/temperature", "25.3")
client.loop_forever()
```

**中文：**

**QoS级别：**

| 级别  | 名称     | 描述     |
| ----- | -------- | -------- |
| **0** | 最多一次 | 无确认   |
| **1** | 至少一次 | 确认传递 |
| **2** | 恰好一次 | 保证传递 |

**Python示例：**
```python
import paho.mqtt.client as mqtt

def on_message(client, userdata, msg):
    print(f"{msg.topic}: {msg.payload.decode()}")

client = mqtt.Client()
client.on_message = on_message
client.connect("broker.hivemq.com", 1883)
client.subscribe("sensor/temperature")
client.publish("sensor/temperature", "25.3")
client.loop_forever()
```

### 5.2 CoAP (Constrained Application Protocol) / CoAP（受限应用协议）

**English:**

**CoAP** is a RESTful protocol for constrained devices and networks.

**Features:**
- UDP-based (lightweight)
- Request/Response model (like HTTP)
- Observe pattern (publish-subscribe)
- Resource discovery
- Small packet size

**Methods:**
- **GET:** Retrieve resource
- **POST:** Create resource
- **PUT:** Update resource
- **DELETE:** Delete resource

**中文：**

**CoAP**是用于受限设备和网络的RESTful协议。

**特性：**
- 基于UDP（轻量级）
- 请求/响应模型（类似HTTP）
- 观察模式（发布-订阅）
- 资源发现
- 小数据包大小

**方法：**
- **GET：** 检索资源
- **POST：** 创建资源
- **PUT：** 更新资源
- **DELETE：** 删除资源

---

## 6. Wireless Standards / 无线标准

### 6.1 Wi-Fi (IEEE 802.11) / Wi-Fi（IEEE 802.11）

**English:**

**Wi-Fi Standards:**

| Standard               | Year | Frequency | Max Speed | Range      |
| ---------------------- | ---- | --------- | --------- | ---------- |
| **802.11b**            | 1999 | 2.4 GHz   | 11 Mbps   | 35m indoor |
| **802.11g**            | 2003 | 2.4 GHz   | 54 Mbps   | 38m indoor |
| **802.11n**            | 2009 | 2.4/5 GHz | 600 Mbps  | 70m indoor |
| **802.11ac**           | 2013 | 5 GHz     | 6.9 Gbps  | 35m indoor |
| **802.11ax (Wi-Fi 6)** | 2019 | 2.4/5 GHz | 9.6 Gbps  | 30-50m     |

**Security:**
- **WEP:** Deprecated (weak)
- **WPA:** Improved security
- **WPA2:** Current standard (AES encryption)
- **WPA3:** Latest standard (enhanced security)

**中文：**

**Wi-Fi标准：**

| 标准                    | 年份 | 频率      | 最大速度 | 范围     |
| ----------------------- | ---- | --------- | -------- | -------- |
| **802.11b**             | 1999 | 2.4 GHz   | 11 Mbps  | 室内35米 |
| **802.11g**             | 2003 | 2.4 GHz   | 54 Mbps  | 室内38米 |
| **802.11n**             | 2009 | 2.4/5 GHz | 600 Mbps | 室内70米 |
| **802.11ac**            | 2013 | 5 GHz     | 6.9 Gbps | 室内35米 |
| **802.11ax（Wi-Fi 6）** | 2019 | 2.4/5 GHz | 9.6 Gbps | 30-50米  |

**安全性：**
- **WEP：** 已弃用（弱）
- **WPA：** 改进的安全性
- **WPA2：** 当前标准（AES加密）
- **WPA3：** 最新标准（增强安全性）

### 6.2 Bluetooth / 蓝牙

**English:**

**Bluetooth Versions:**

| Version      | Year      | Range | Speed    | Power          |
| ------------ | --------- | ----- | -------- | -------------- |
| **1.x-3.0**  | 1999-2009 | 10m   | 1-3 Mbps | High           |
| **4.0 (LE)** | 2010      | 50m   | 1 Mbps   | Very Low       |
| **5.0**      | 2016      | 240m  | 2 Mbps   | Low            |
| **5.2**      | 2020      | 240m  | 2 Mbps   | Low (LE Audio) |

**Bluetooth LE (Low Energy):**
- Very low power consumption
- GATT (Generic Attribute Profile)
- Advertising and scanning
- Ideal for IoT sensors

**中文：**

**蓝牙版本：**

| 版本          | 年份      | 范围  | 速度     | 功耗         |
| ------------- | --------- | ----- | -------- | ------------ |
| **1.x-3.0**   | 1999-2009 | 10米  | 1-3 Mbps | 高           |
| **4.0（LE）** | 2010      | 50米  | 1 Mbps   | 极低         |
| **5.0**       | 2016      | 240米 | 2 Mbps   | 低           |
| **5.2**       | 2020      | 240米 | 2 Mbps   | 低（LE音频） |

**蓝牙LE（低功耗）：**
- 极低功耗
- GATT（通用属性配置文件）
- 广播和扫描
- 适合物联网传感器

---

## 7. Security Protocols / 安全协议

### 7.1 TLS/SSL / TLS/SSL

**English:**

**TLS (Transport Layer Security):**

**Handshake Process:**
1. Client Hello (supported cipher suites)
2. Server Hello (selected cipher, certificate)
3. Certificate verification
4. Key exchange
5. Encrypted communication

**Versions:**
- **SSL 2.0/3.0:** Deprecated (insecure)
- **TLS 1.0/1.1:** Deprecated
- **TLS 1.2:** Current standard
- **TLS 1.3:** Latest (faster, more secure)

**中文：**

**TLS（传输层安全）：**

**握手过程：**
1. 客户端Hello（支持的密码套件）
2. 服务器Hello（选定的密码、证书）
3. 证书验证
4. 密钥交换
5. 加密通信

**版本：**
- **SSL 2.0/3.0：** 已弃用（不安全）
- **TLS 1.0/1.1：** 已弃用
- **TLS 1.2：** 当前标准
- **TLS 1.3：** 最新（更快、更安全）

### 7.2 OAuth 2.0 / OAuth 2.0

**English:**

**OAuth 2.0** is an authorization framework for delegated access.

**Flow Types:**
- **Authorization Code:** Web applications
- **Implicit:** Single-page apps (deprecated)
- **Client Credentials:** Service-to-service
- **Resource Owner Password:** Mobile apps (not recommended)

**Components:**
- **Resource Owner:** User
- **Client:** Application
- **Authorization Server:** Issues tokens
- **Resource Server:** Hosts protected resources

**中文：**

**OAuth 2.0**是用于委托访问的授权框架。

**流程类型：**
- **授权码：** Web应用
- **隐式：** 单页应用（已弃用）
- **客户端凭证：** 服务间
- **资源所有者密码：** 移动应用（不推荐）

**组件：**
- **资源所有者：** 用户
- **客户端：** 应用程序
- **授权服务器：** 发行令牌
- **资源服务器：** 托管受保护资源

---

## 8. Protocol Comparison and Selection / 协议比较和选择

**English:**

**IoT Protocol Comparison:**

| Protocol      | Transport | Power    | Bandwidth | Use Case            |
| ------------- | --------- | -------- | --------- | ------------------- |
| **MQTT**      | TCP       | Medium   | Low       | Smart home, sensors |
| **CoAP**      | UDP       | Very Low | Very Low  | Constrained devices |
| **HTTP**      | TCP       | High     | High      | Web services        |
| **WebSocket** | TCP       | Medium   | Medium    | Real-time web apps  |

**Industrial Protocol Comparison:**

| Protocol     | Determinism | Speed     | Complexity | Use Case               |
| ------------ | ----------- | --------- | ---------- | ---------------------- |
| **Modbus**   | Low         | Slow      | Simple     | Legacy systems         |
| **PROFINET** | High        | Fast      | Complex    | Factory automation     |
| **OPC UA**   | Medium      | Medium    | Complex    | Enterprise integration |
| **EtherCAT** | Very High   | Very Fast | Complex    | Motion control         |

**中文：**

**物联网协议比较：**

| 协议          | 传输 | 功耗 | 带宽 | 用例             |
| ------------- | ---- | ---- | ---- | ---------------- |
| **MQTT**      | TCP  | 中   | 低   | 智能家居、传感器 |
| **CoAP**      | UDP  | 极低 | 极低 | 受限设备         |
| **HTTP**      | TCP  | 高   | 高   | Web服务          |
| **WebSocket** | TCP  | 中   | 中   | 实时Web应用      |

**工业协议比较：**

| 协议         | 确定性 | 速度 | 复杂度 | 用例       |
| ------------ | ------ | ---- | ------ | ---------- |
| **Modbus**   | 低     | 慢   | 简单   | 遗留系统   |
| **PROFINET** | 高     | 快   | 复杂   | 工厂自动化 |
| **OPC UA**   | 中     | 中   | 复杂   | 企业集成   |
| **EtherCAT** | 极高   | 极快 | 复杂   | 运动控制   |

---

## 9. Protocol Analysis Tools / 协议分析工具

### 9.1 Wireshark / Wireshark

**English:**

**Wireshark** is the industry-standard network protocol analyzer.

**Common Filters:**
```
tcp.port == 80              # HTTP traffic
ip.addr == 192.168.1.1      # Specific IP
dns                         # DNS queries
mqtt                        # MQTT traffic
http.request.method == "GET"  # HTTP GET requests
tcp.flags.syn == 1          # TCP SYN packets
```

**Useful Features:**
- Packet capture and inspection
- Protocol decoding
- Statistics and graphs
- Follow TCP stream
- Export objects

**中文：**

**Wireshark**是行业标准的网络协议分析器。

**常用过滤器：**
```
tcp.port == 80              # HTTP流量
ip.addr == 192.168.1.1      # 特定IP
dns                         # DNS查询
mqtt                        # MQTT流量
http.request.method == "GET"  # HTTP GET请求
tcp.flags.syn == 1          # TCP SYN数据包
```

**有用功能：**
- 数据包捕获和检查
- 协议解码
- 统计和图表
- 跟随TCP流
- 导出对象

---

## Conclusion / 结论

**English:**
Protocol standards are the foundation of modern communication systems, enabling interoperability across diverse devices and networks. Understanding core Internet protocols (TCP/IP, HTTP, DNS), industrial protocols (Modbus, OPC UA), IoT protocols (MQTT, CoAP), and wireless standards (Wi-Fi, Bluetooth) is essential for network engineers, software developers, and system integrators. As technology evolves, new protocols continue to emerge, but the fundamental principles of layering, encapsulation, addressing, and error control remain constant. Proper protocol selection based on requirements such as reliability, latency, power consumption, and bandwidth is critical for successful system design.

**中文：**
协议标准是现代通信系统的基础，使不同设备和网络之间的互操作成为可能。理解核心互联网协议（TCP/IP、HTTP、DNS）、工业协议（Modbus、OPC UA）、物联网协议（MQTT、CoAP）和无线标准（Wi-Fi、蓝牙）对网络工程师、软件开发人员和系统集成商至关重要。随着技术的发展，新协议不断涌现，但分层、封装、寻址和错误控制的基本原则保持不变。根据可靠性、延迟、功耗和带宽等要求正确选择协议对成功的系统设计至关重要。

---

**END OF DOCUMENT / 文档结束**
